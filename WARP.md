# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Overview

This repository contains YAML theme definitions for the Warp terminal plus tooling to generate SVG previews and README tables for each theme family.

Theme families:

- `standard/` – popular themes ported from other tools (e.g. Dracula, Gruvbox, Solarized).
- `base16/` – themes following the Base16 color scheme architecture.
- `special_edition/` – seasonal or event-based themes (e.g. Pride, Winter, Oppenheimer, Barbie).

## Common commands

### Environment setup

- Install the Python dependency used by the preview generator:

  - `pip install -r scripts/requirements.txt`

  If you see an error about missing `yaml` when running the generator, install `PyYAML` (this is what `scripts/requirements.txt` pins).

### Generate theme previews and README tables

Theme previews and the README tables inside each theme family directory are generated by `scripts/gen_theme_previews.py`.

Run from the repository root:

- Regenerate previews and README for the standard themes:

  - `python3 ./scripts/gen_theme_previews.py standard`

- Regenerate previews and README for Base16 themes:

  - `python3 ./scripts/gen_theme_previews.py base16`

- Regenerate previews and README for special edition themes:

  - `python3 ./scripts/gen_theme_previews.py special_edition`

- For a new or custom theme directory, pass its relative path:

  - `python3 ./scripts/gen_theme_previews.py <theme-directory>`

This script will:

- Find all `.yaml` / `.yml` files in the target directory.
- Generate per-theme preview SVGs under `<theme-directory>/previews/`.
- Overwrite `<theme-directory>/README.md` with a table linking each theme file to its preview.

Because these READMEs are generated, avoid hand-editing:

- `base16/README.md`
- `standard/README.md`
- `special_edition/README.md`

Instead, modify the theme YAML files and rerun the generator.

There is also a Warp workflow wired to the generator:

- `.warp/workflows/run_themes_generator.yml` runs `python3 ./scripts/gen_theme_previews.py {{directory}}` (default `directory: standard`).

### Linting and formatting

The repo uses trunk (configured in `.trunk/trunk.yaml`) for linting and formatting:

- Run all configured linters:

  - `trunk check`

  This runs Black, isort, flake8 on Python, Prettier and markdownlint on Markdown, SVGO on SVG, and gitleaks for secrets.

- Apply auto-formatting where supported:

  - `trunk fmt`

### Tests

There is no dedicated automated test suite for this repository. Validation is primarily:

- Running the preview generator successfully.
- Visually verifying generated SVG previews and README tables in each theme directory.

## Theme YAML architecture

All themes are defined in standalone `.yaml` / `.yml` files. A typical theme contains:

- Top-level colors:

  - `accent`: hex string for accent color (for example `#bd93f9`).
  - `background`: hex string for background color.
  - `foreground`: hex string for foreground/text color.
  - `details`: string hint such as `darker` to control UI styling.

- Terminal color palette:

  - `terminal_colors.normal`: mapping of `black`, `red`, `green`, `yellow`, `blue`, `magenta`, `cyan`, `white` to hex colors.
  - `terminal_colors.bright`: same keys for the bright variants.

The preview generator relies on these keys (`accent`, `foreground`, `background`, and both `terminal_colors` maps) to fill color placeholders in `scripts/preview.svg`. If you change the schema of theme files, you will likely need to adjust `scripts/gen_theme_previews.py` accordingly.

### Background images

Themes can optionally define a background image:

```yaml
background_image:
  # background image credit: https://example.com/your-image
  path: level_one/level_two/background_image.jpg
```

Key points:

- `path` can be a relative path under `~/.warp/themes` (recommended) or an absolute filesystem path.
- This repository should not include binary background image files in contributions. Instead:
  - Add a comment in the YAML with a URL where users can download the image.
  - Set `background_image.path` to the path where users are expected to place the image locally.

## Repository layout and key files

- `README.md` – high-level overview of Warp themes, background image usage, and contribution notes.
- `README-intro.md` – intro content referenced by tooling and documentation.
- `standard/` – standard themes, their generated `README.md`, and `previews/` SVGs.
- `base16/` – Base16 themes, their generated `README.md`, and `previews/` SVGs.
- `special_edition/` – special-edition themes (for example holidays), with generated `README.md` and `previews/` SVGs.
- `scripts/`
  - `gen_theme_previews.py` – main script to generate README tables and SVG previews for a theme directory.
  - `preview.svg` – SVG template used by the generator; color placeholders are replaced per theme.
  - `requirements.txt` – Python dependencies for the generator (currently PyYAML).
- `.trunk/trunk.yaml` – trunk configuration and pinned versions of linters and runtimes.
- `.warp/workflows/run_themes_generator.yml` – Warp workflow for running the theme preview generator.
- `.github/PULL_REQUEST_TEMPLATE.md` – contribution template with additional guidance (notably around background images and running the preview generator before submitting a PR).

## Contribution-specific notes

When adding or modifying themes:

- Place new theme files in the appropriate family directory (`standard/`, `base16/`, or `special_edition/`).
- Do not commit background image binaries; instead:
  - Document the intended image via a comment with a URL.
  - Reference the expected local path under `background_image.path`.
- Run `python3 ./scripts/gen_theme_previews.py <theme-directory>` for the directory you modified so that the README and preview SVGs stay in sync with your changes.
- Use `trunk check` before submitting PRs to catch formatting, style, and basic issues across Python, Markdown, SVG, and secrets.
